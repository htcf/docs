<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Q1 - 2021 Changes - High Throughput Computing Facility @ CGSSB</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="generator" content="mkdocs-1.3.0, mkdocs-gitbook-1.0.7">

<link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../../css/style.min.css" rel="stylesheet">
<link href="../../stylesheets/extra.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">
<div id="book-search-input" role="search">
<input type="text" placeholder="Type to search" />
</div> <!-- end of book-search-input -->

<nav role="navigation">
<ul class="summary">
<li>
<a href="../.." target="_blank" class="custom-link">High Throughput Computing Facility @ CGSSB</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="">
<a href="../..">The HTCF</a>
<li class="header">Doing Work</li>

<li>
<a href="../../getstarted/" class="">Getting Started</a>
</li>

<li>
<a href="../../runningjobs/" class="">Running Jobs</a>
</li>

<li>
<a href="../../using/queue/" class="">The Queue</a>
</li>

<li>
<a href="../../using/" class="">Using the HTCF</a>
</li>

<li>
<a href="../../using/batch/" class="">Batch Jobs</a>
</li>

<li>
<a href="../../using/interactive/" class="">Interactive Jobs</a>
</li>

<li>
<a href="../../using/accounting/" class="">Job Accounting</a>
</li>

<li class="chapter" data-path="policies/">
<a href="../../policies/">Policies</a>
<li class="header">Storage</li>

<li>
<a href="../../storage/" class="">Overview</a>
</li>

<li>
<a href="../../storage/hts/" class="">HTS</a>
</li>

<li>
<a href="../../storage/ref/" class="">REF</a>
</li>

<li>
<a href="../../storage/lts/" class="">LTS</a>
</li>

<li>
<a href="../../storage/ltos/" class="">LTOS</a>
</li>

<li>
<a href="../../storage/new_index.md" class="">Beta</a>
</li>

<li class="chapter" data-path="software/">
<a href="../../software/">Software</a>
<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">
<div id="book-search-results">
<div class="search-noresults">

<section class="normal markdown-section">



<h1 id="q1-2021-changes">Q1 - 2021 Changes</h1>
<p>The beginning of 2021 will see quite a few (pretty cool, we think) changes within the HTCF.  Much effort has been made to ease the transitions that are necessary to make these changes.  Please contact us with any questions or concerns.</p>
<h2 id="whats-changing">What's changing?</h2>
<p>There are essentially 4 changes (with more detail and schedule further down): </p>
<dl>
<dt><strong>OS Upgrade</strong></dt>
<dd>
<p>While the HTCF <em>backend</em> servers have been continually upgraded over the years, the cluster nodes and login server are long overdue for an OS upgrade.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Many of the current software modules rely on system libraries.  These libraries will be upgraded when the OS is upgraded.</p>
<p>It it likely that some software packages will have errors due to the change in system libraries.  Don't worry though, we've got a solution for that.... <img alt="ðŸ‘‡" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f447.svg" title=":point_down:" /></p>
</div>
</dd>
<dt><strong>Self-Service Software</strong> <img alt="ðŸš" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f690.svg" title=":minibus:" /></dt>
<dd>
<p>As the HTCF user base grows, so do the software installation needs.  Maintaining the software and modules for all labs can leave a web of dependency, version, and architecture conflicts that are difficult to untangle.  The most sensible, sustainable, and flexible approach going forward is for HTCF support to move over to the passenger seat and leave the driving to the labs.  Labs should now feel empowered to install and manage their own software (with us in the passenger seat to help navigate).</p>
<p>Infrastructure is in place to ease in this, including an <strong>initial 1TB of space per lab</strong> for software storage called /ref.  Speaking of which.... <img alt="ðŸ‘‡" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f447.svg" title=":point_down:" /></p>
</dd>
<dt><strong>/ref</strong></dt>
<dd>A new form of LTS storage called /ref will be introduced.  /ref is storage space for software and reference databases (think NCBI databases or software-provided reference sequences).  Each lab will be given an initial 1TB of reference space, this space can be expanded at LTS prices.  Speaking of new forms of LTS.... <img alt="ðŸ‘‡" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f447.svg" title=":point_down:" /></dd>
<dt><strong>LTOS</strong> <img alt="â˜" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/2601.svg" title=":cloud:" /></dt>
<dd>
<p><strong>Object Storage LTS</strong> as been quietly available for a while, but now it's official.  This is the <em>cloud storage</em> form of local LTS (<em>local</em> meaning high speed and hosted within the HTCF) that uses the <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html">Amazon S3 API</a> for access.  It's well suited for large amounts of data that don't change much (e.g. raw sequencing runs).</p>
<p><strong>Unlike traditional LTS</strong>:</p>
<ul>
<li>LTOS buckets don't have a size limit</li>
<li>They're available from each node <ul>
<li>no more login server copying back and forth!</li>
<li>Aggregate transfer rates can be much faster than traditional /lts.</li>
</ul>
</li>
<li>Before you get too excited, there's a learning curve...because it's more like cloud storage, you won't find it in a traditional filesystem directory.  So <code>cp</code>, <code>mv</code>, and <code>rsync</code> will not help you. With the right use case though, we're confident that the learning curve will be well worth it!</li>
</ul>
</dd>
</dl>
<h3 id="os-upgrade">OS Upgrade</h3>
<p>All nodes (including the login server) will be upgraded from Ubuntu 16.04 to Ubuntu 20.04.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Many of the current software modules rely on system libraries.  These libraries will be upgraded when the OS is upgraded.</p>
<p>It it likely that some software packages will have errors due to the change in system libraries.</p>
</div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
<th>% nodes containing upgraded OS</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>New slurm partition <strong><code>beta</code></strong> will be made available for trying out jobs on a small number of nodes that use the upgraded OS. <br/> To use, add: <code>#SBATCH -p beta</code> to your sbatch files</td>
<td>5%</td>
</tr>
<tr>
<td>Jan 18</td>
<td>Login Server will be upgraded to new OS</td>
<td>5%</td>
</tr>
<tr>
<td>Jan 18 - 25</td>
<td>Rolling OS upgrades of idle nodes (up to 50% of nodes) will continue.</td>
<td>5% - 50%</td>
</tr>
<tr>
<td>Feb 1</td>
<td>Slurm partition <strong><code>general</code></strong> will be renamed <strong><code>legacy</code></strong> and <strong><code>beta</code></strong> will be renamed to <strong><code>general</code></strong>.</td>
<td>50%</td>
</tr>
<tr>
<td>Feb 1</td>
<td>Slurm partition <strong><code>general</code></strong> will become the default interactive and batch job partition.</td>
<td>50%</td>
</tr>
<tr>
<td>Feb 1 - 15</td>
<td>Rolling OS upgrades of idle nodes (up to 95% of nodes) will continue.</td>
<td>50% - 95%</td>
</tr>
<tr>
<td>Mar 8</td>
<td>All nodes upgraded</td>
<td><img alt="ðŸ’¯" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f4af.svg" title=":100:" /></td>
</tr>
</tbody>
</table>
<h3 id="self-service-software-and-modules">Self-service software and modules</h3>
<p>The system-wide software and modules in directories <code>/opt/apps</code> and <code>/opt/htcf</code> will be frozen (read-only) and use of software in these directories is <strong>deprecated.</strong></p>
<p>Replacing these directories will be a form of LTS call /ref, lab reference space located in <code>/ref/&lt;lab&gt;/software</code> and <code>/ref/&lt;lab&gt;/modulefiles</code>.  Each lab will receive 1TB of space in /ref for storage of reference material including software and reference sequence databases.  <a href="storage/ref.md">More information about /ref can be found here.</a></p>
<p>Software installation will now be self-service.  To aid in this, <a href="software_new.md">documentation has been added</a> and infrastructue is in place for lab-managed <a href="software_new.md#spack">spack installations</a>.  Thousands of packages are available for installation using <a href="https://spack.readthedocs.io/">spack</a>.</p>
<div class="admonition help">
<p class="admonition-title">Help</p>
<p>We are here to help with the migration from the deprecated modules system to your labs' new /ref software.  Rest assured that the deprecated software will not be removed until migration is complete.</p>
</div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>Each lab given 1TB of /ref space which will be <a href="#cluster-wide-operating-system-upgrade"><strong>availabe on all OS-upgraded nodes</strong></a>.  <br /> To begin testing: <br/> <code>srun --mem=X000 -c X -p beta --pty /bin/bash -l</code></td>
</tr>
<tr>
<td>Jan 18</td>
<td>/opt/apps and /opt/htcf will go read-only to encourage use of /ref</td>
</tr>
<tr>
<td>Jan 25</td>
<td>modules loaded from /opt/apps and /opt/htcf will contain a Deprecation Warning to encourage use of /ref</td>
</tr>
<tr>
<td>Mar 1 - 8</td>
<td>modules for software in /opt/apps and /opt/htcf will be incrementally removed</td>
</tr>
<tr>
<td>Mar 8</td>
<td>/opt/apps and /opt/htcf directories will be decommissioned.</td>
</tr>
</tbody>
</table>
<h3 id="ref">/ref</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keep in mind, while /ref is a form of LTS, it <strong>is not /lts</strong> (e.g. it isn't backed up)</p>
</div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>Each lab given 1TB of /ref space which will be <a href="#cluster-wide-operating-system-upgrade"><strong>availabe on all OS-upgraded nodes</strong></a> to begin testing: <br/> <code>srun --mem=X000 -c X -p beta --pty /bin/bash -l</code></td>
</tr>
<tr>
<td>Feb 1</td>
<td>The <code>/scratch/ref</code> data directory will be renamed <code>/scratch/old-ref</code> to encourage use of <code>/ref/&lt;lab&gt;/data/</code> instead.</td>
</tr>
<tr>
<td>Mar 8</td>
<td><code>/scratch/old-ref</code> directory will be decommissioned.</td>
</tr>
</tbody>
</table>
<h3 id="ltos">LTOS</h3>
<table>
<thead>
<tr>
<th>Date</th>
<th>Change</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jan 11</td>
<td>LTOS open for business</td>
</tr>
<tr>
<td>Feb 1</td>
<td>Labs with traditional /lts buckets &gt;= 15TB will be encouraged to consider LTOS for some of their bulky data (such as raw sequence data)</td>
</tr>
</tbody>
</table>


</section>
</div> <!-- end of search-noresults -->
<div class="search-results">
<div class="has-results">

<h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
<ul class="search-results-list"></ul>

</div> <!-- end of has-results -->
<div class="no-results">

<h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>

</div> <!-- end of no-results -->
</div> <!-- end of search-results -->
</div> <!-- end of book-search-results -->

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../../js/main.js"></script>
<script src="../../search/main.js"></script>
<script src="../../js/gitbook.min.js"></script>
<script src="../../js/theme.min.js"></script>
</body>
</html>